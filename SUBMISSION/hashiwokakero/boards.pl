%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SAMPLE PROBLEMS
% THE FIRST 4 PUZZLES ARE THE ONES GIVEN WITH THE ASSIGNMENT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% boards for which wrong solutions with multiple connected sets are possible:
%   6 (with improvement A turned off), 7 (with improvements A and B turned off), 9 (with improvement B off), 12, 15, 17

%   CONNECTIVITY PROPAGATOR 1
%       board number & no improvements & isolation improvements
%       1   & 0.049s & 0.044s
%       2   & > 1h30m & 497.33s (8.3m)
%       3   & 0.026s & 0.03s
%       4   & 0.054s & 0.057s
%       5   & 0.05s & 0.049s
%       6   & 0.121s & 0.114s
%       8   & 0.006s & 0.004s
%       9   & 0.006s & 0.007s
%       10  & 26.642s & 1.344s
%       11  & 0.044s & 0.049s
%       12  & 0.05s & 0.05s
%       13  & 0.056s & 0.056s
%       14  & 0.097s & 0.066s
%       15  & 1.584s & 1.527s
%       16  & 1.11s & 1.113s
%       17  & 2.152s & 0.222s
%       18  & 0.035s & 0.051s
%       19  & 0.01s & 0.011s
%       20  & 0.034s & 0.024s
%       21  & 0.012s & 0.013s
%       22  & 0.028s & 0.027s
%
%   CONNECTIVITY PROPAGATOR 2
%       board number & no improvements & isolation improvements & connectivity constraint improvement & all improvements
%       1   & 0.05s & 0.053s & 0.054s & 0.048s
%       2   & unknown & 515.92 (8.6m) & ??? & 316.37s (5.3m)
%       3   & 0.028s & 0.028s & 0.028s & 0.026s
%       4   & 0.065s & 0.059s & 0.057s & 0.062s
%       5   & 0.058s & 0.052s & 0.051s & 0.051s
%       6   & 0.125s & 0.119s & 0.127s & 0.116s
%       8   & 0.007s & 0.004s & 0.006s & 0.006s
%       9   & 0.007s & 0.01s & 0.007s & 0.006s
%       10  & 27.415s & 1.356s & 50.548s & 1.34s
%       11  & 0.046s & 0.047s & 0.048s & 0.048s
%       12  & 0.052s & 0.048s & 0.053s & 0.052s
%       13  & 0.059s & 0.059s & 0.06s & 0.06s
%       14  & 0.093s & 0.077s & 0.093s & 0.076s
%       15  & 1.587s & 1.613s & 1.604s & 1.555s
%       16  & 1.127s & 1.226s & 1.132s & 1.143s
%       17  & 2.221s & 0.232s & 2.585s & 0.234s
%       18  & 0.047s & 0.049s & 0.06s & 0.039s
%       19  & 0.01s & 0.011s & 0.012s & 0.011s
%       20  & 0.024s & 0.023s & 0.024s & 0.029s
%       21  & 0.012s & 0.013s & 0.014s & 0.012s
%       22  & 0.03s & 0.037s & 0.024s & 0.026s


% puzzle 1, easy
% http://en.wikipedia.org/wiki/File:Val42-Bridge1n.png
% solution: http://en.wikipedia.org/wiki/File:Val42-Bridge1.png
puzzle(1,7,P):-
	P=[	(1,1,2),(1,2,3),(1,4,4),(1,6,2),
		(2,7,2),
		(3,1,1),(3,2,1),(3,5,1),(3,6,3),(3,7,3),
		(4,1,2),(4,4,8),(4,6,5),(4,7,2),
		(5,1,3),(5,3,3),(5,7,1),
		(6,3,2),(6,6,3),(6,7,4),
		(7,1,3),(7,4,3),(7,5,1),(7,7,2)].

% puzzle 2, moderate
% http://en.wikipedia.org/wiki/File:Bridges-example.png
% solution: http://upload.wikimedia.org/wikipedia/en/1/10/Bridges-answer.PNG

puzzle(2,13,P):-
	P=[	(1,1,2),(1,3,4),(1,5,3),(1,7,1),(1,9,2),(1,12,1),
		(2,10,3),(2,13,1),
		(3,5,2),(3,7,3),(3,9,2),
		(4,1,2),(4,3,3),(4,6,2),(4,10,3),(4,12,1),
		(5,5,2),(5,7,5),(5,9,3),(5,11,4),
		(6,1,1),(6,3,5),(6,6,2),(6,8,1),(6,12,2),
		(7,7,2),(7,9,2),(7,11,4),(7,13,2),
		(8,3,4),(8,5,4),(8,8,3),(8,12,3),
		(10,1,2),(10,3,2),(10,5,3),(10,9,3),(10,11,2),(10,13,3),
		(11,6,2),(11,8,4),(11,10,4),(11,12,3),
		(12,3,1),(12,5,2),
		(13,1,3),(13,6,3),(13,8,1),(13,10,2),(13,13,2)].

% puzzle 3
% http://www.conceptispuzzles.com/index.aspx?uri=puzzle/hashi/techniques
puzzle(3,6,P) :-
     P = [ (1,1,1),(1,3,4),(1,5,2),
			(2,4,2),(2,6,3),
			(3,1,4),(3,3,7),(3,5,1),
			(4,4,2),(4,6,5),
			(5,3,3),(5,5,1),
			(6,1,3),(6,4,3),(6,6,3)].

% puzzle 4
% http://www.conceptispuzzles.com/index.aspx?uri=puzzle/euid/010000008973f050f28ceb4b11c74e73d34e1c47d885e0d8449ab61297e5da2ec85ea0804f0c5a024fbf51b5a0bd8f573565bc1b/play
puzzle(4,8,P) :-
	P = [ (1,1,2),(1,3,2),(1,5,5),(1,7,2),
			(2,6,1),(2,8,3),
			(3,1,6),(3,3,3),
			(4,2,2),(4,5,6),(4,7,1),
			(5,1,3),(5,3,1),(5,6,2),(5,8,6),
			(6,2,2),
			(7,1,1),(7,3,3),(7,5,5),(7,8,3),
			(8,2,2),(8,4,3),(8,7,2)].

% http://stackoverflow.com/questions/20337029/hashi-puzzle-representation-to-solve-all-solutions-with-prolog-restrictions/20364306#20364306
board(5, [
    [3, 0, 6, 0, 0, 0, 6, 0, 3],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 1, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [2, 0, 0, 0, 0, 1, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [1, 0, 3, 0, 0, 2, 0, 0, 0],
    [0, 3, 0, 0, 0, 0, 4, 0, 1]
]).

% same as 1, but more split up for visibility
board(6, [
    [2, 0, 3, 0, 4, 0, 0, 0, 2, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [1, 0, 1, 0, 0, 0, 1, 0, 3, 0, 3],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [2, 0, 0, 0, 8, 0, 0, 0, 5, 0, 2],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [3, 0, 0, 3, 0, 0, 0, 0, 0, 0, 1],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 2, 0, 0, 0, 0, 3, 0, 4],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [3, 0, 0, 0, 3, 0, 1, 0, 0, 0, 2]
]).

% THIS BOARD SHOULD FAIL
board(7, [
    [1, 0, 1, 0, 2],
    [0, 0, 0, 0, 0],
    [0, 0, 0, 0, 2]
]).

board(8, [
    [1, 0, 2, 0, 3],
    [0, 0, 0, 0, 0],
    [0, 0, 0, 0, 2]
]).

board(9, [
    [2, 0, 0, 0, 2],
    [0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0],
    [2, 0, 0, 0, 2]
]).

board(10, [
    [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 3, 0, 2, 0],
    [4, 0, 0, 0, 4, 0, 0, 3, 0, 0, 0, 4, 0, 4, 0, 0, 2, 0, 0, 0, 1],
    [0, 1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 4, 0],
    [4, 0, 0, 0, 0, 0, 0, 0, 2, 0, 3, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0],
    [0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
    [0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 3, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
    [0, 4, 0, 0, 0, 0, 0, 0, 2, 0, 0, 3, 0, 0, 0, 0, 0, 4, 0, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 1, 0, 0, 0, 0, 0],
    [0, 0, 3, 0, 6, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 2, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 4, 0, 6, 0, 0, 0, 0, 0, 0, 5],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 2, 0, 4, 0, 1, 0, 2, 0, 0, 3, 0, 4, 0, 0, 0, 0, 2, 0, 0],
    [0, 5, 0, 0, 0, 0, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 4, 0, 0, 0, 0, 0, 0, 1, 0],
    [3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 3, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 6, 0, 0, 0, 0, 0, 0, 0, 5],
    [0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 3, 0, 0, 0, 4, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 2],
    [1, 0, 2, 0, 3, 0, 0, 0, 0, 0, 0, 0, 5, 0, 0, 0, 0, 4, 0, 2, 0]
]).

board(11, [
    [4, 0, 3, 0, 4, 0, 3, 0, 4],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [2, 0, 0, 0, 0, 0, 0, 0, 2],
    [0, 0, 2, 0, 8, 0, 0, 2, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 4, 0, 5, 0, 0, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [2, 0, 6, 0, 2, 0, 0, 0, 0]
]).

board(12, [
    [4, 0, 4, 0, 0, 2, 0, 2, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [3, 0, 1, 0, 0, 4, 0, 4, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [1, 0, 0, 0, 0, 0, 0, 2, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 2, 0, 0, 0]
]).

board(13, [
    [0, 3, 0, 0, 0, 0, 0, 2, 0],
    [0, 0, 0, 2, 0, 0, 0, 0, 2],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 4, 0, 7, 0, 0, 0, 2, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 1, 0, 3, 0, 0, 3, 0, 3],
    [0, 0, 0, 0, 0, 0, 0, 1, 0],
    [0, 2, 0, 0, 0, 0, 6, 0, 3],
    [0, 0, 0, 0, 0, 0, 0, 0, 0]
]).

board(14, [
    [2, 0, 3, 0, 0, 2, 0, 0, 1],
    [0, 0, 0, 0, 0, 0, 1, 0, 0],
    [1, 0, 5, 0, 2, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 2, 0, 4],
    [0, 0, 0, 0, 1, 0, 0, 0, 0],
    [1, 0, 5, 0, 0, 7, 0, 0, 6],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 3, 0, 2, 0, 0, 0, 0],
    [2, 0, 0, 0, 0, 4, 0, 0, 2]
]).

board(15, [
    [0, 2, 0, 2, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0],
    [0, 0, 4, 0, 4, 0, 8, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 3, 0, 0, 2],
    [0, 0, 0, 1, 0, 2, 0, 4, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 2, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 3, 0, 0, 0, 0, 0, 3, 0, 1],
    [0, 0, 6, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 5, 0, 6, 0, 4, 0, 1, 0, 0, 0, 3, 0, 4],
    [0, 0, 3, 0, 0, 3, 0, 0, 0, 0, 0, 2, 0, 4, 0, 0, 2, 0, 0, 0, 0],
    [0, 0, 0, 0, 2, 0, 0, 4, 0, 0, 4, 0, 0, 0, 0, 0, 0, 6, 0, 0, 3],
    [0, 0, 0, 0, 0, 3, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
    [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 3, 0, 0, 1],
    [0, 0, 3, 0, 0, 3, 0, 4, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0],
    [0, 3, 0, 0, 0, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3],
    [0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 5, 0, 0, 0, 3, 0, 0, 0, 1, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 3, 0, 0, 0, 0, 3, 0, 0, 0, 5, 0, 0, 0, 0, 0, 6, 0, 0, 0, 3],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 4, 0, 0, 0, 0, 2, 0, 1, 0, 4, 0, 4, 0, 2, 0, 2, 0, 1, 0, 2]
]).

board(16, [
    [1, 0, 5, 0, 3, 0, 0, 0, 0, 0, 4, 0, 0, 0, 4, 0, 0, 0, 6, 0, 4],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [1, 0, 4, 0, 0, 0, 0, 0, 2, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0],
    [3, 0, 0, 0, 2, 0, 0, 0, 1, 0, 0, 0, 3, 0, 5, 0, 0, 2, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [3, 0, 6, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 2, 0, 0],
    [0, 0, 3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3],
    [3, 0, 0, 0, 2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
    [0, 3, 0, 4, 0, 0, 8, 0, 0, 3, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 0, 2, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 3, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 2, 0, 6, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
    [4, 0, 0, 5, 0, 0, 0, 0, 0, 0, 7, 0, 0, 4, 0, 0, 3, 0, 0, 2, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3],
    [2, 0, 0, 1, 0, 2, 0, 0, 0, 0, 6, 0, 0, 0, 0, 4, 0, 0, 0, 2, 0]
]).

board(17, [
    [2, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0],
    [0, 0, 0, 3, 0, 0, 2, 0, 2, 0, 4, 0, 1],
    [2, 0, 5, 0, 0, 3, 0, 0, 0, 1, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 4, 0, 6, 0, 0, 0, 0, 6, 0, 2],
    [2, 0, 0, 0, 2, 0, 4, 0, 2, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [4, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1],
    [0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0],
    [3, 0, 5, 0, 0, 0, 5, 0, 0, 0, 6, 0, 1],
    [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [1, 0, 3, 0, 0, 0, 2, 0, 1, 0, 0, 0, 0],
    [0, 2, 0, 4, 0, 0, 0, 0, 0, 0, 5, 0, 2]
]).

board(18, [
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 2, 0, 1, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
    [1, 0, 4, 0, 6, 0, 2, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 4, 0, 5, 0, 2, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
    [2, 0, 6, 0, 2, 0, 1, 0]
]).

board(19, [
    [0, 0, 2, 0, 0,1 ],
    [0, 0, 0, 0, 0,0 ],
    [0, 0, 2, 0, 0,0 ],
    [0, 0, 0, 0, 0,0 ],
    [1, 0, 3, 0, 1,0 ]
]).

board(20, [
    [2, 0, 3, 0, 1, 0],
    [0, 0, 0, 0, 0, 1],
    [4, 0, 6, 0, 1, 0],
    [0, 0, 0, 2, 0, 4],
    [0, 0, 3, 0, 1, 0],
    [2, 0, 0, 2, 0, 2]
]).


board(21, [
    [2, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0],
    [3, 0, 2, 0, 0, 0],
    [0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0],
    [1, 0, 2, 0, 0, 0]
]).


board(22, [
    [2, 0, 2, 0, 3, 0, 2],
    [0, 0, 0, 0, 0, 0, 0],
    [0, 0, 1, 0, 4, 0, 2],
    [0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0],
    [1, 0, 2, 0, 3, 0, 0]
]).
